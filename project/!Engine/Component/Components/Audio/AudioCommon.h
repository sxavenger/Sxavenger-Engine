#pragma once

//-----------------------------------------------------------------------------------------
// include
//-----------------------------------------------------------------------------------------
//* xaudio2
#include <xaudio2.h>
#include <x3daudio.h>

////////////////////////////////////////////////////////////////////////////////////////////
// AudioHandle structure
////////////////////////////////////////////////////////////////////////////////////////////
struct AudioHandle {
public:

	////////////////////////////////////////////////////////////////////////////////////////////
	// Tag enum class
	////////////////////////////////////////////////////////////////////////////////////////////
	enum class Tag : uint8_t {
		SE,  //!< Sound Effect
		BGM, //!< Background Music
	};

public:

	//=========================================================================================
	// public methods
	//=========================================================================================

	AudioHandle(IXAudio2SourceVoice* source) : source(source) {}
	~AudioHandle();

	void Play();

	void Stop();

	void SetVolume(float volume);

	void Flash();

	IXAudio2SourceVoice* GetSource() const { return source; }

	XAUDIO2_VOICE_DETAILS GetVoiceDetails() const;

	//=========================================================================================
	// public variables
	//=========================================================================================

	IXAudio2SourceVoice* const source = nullptr;

};
