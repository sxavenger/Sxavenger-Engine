#pragma once

//-----------------------------------------------------------------------------------------
// include
//-----------------------------------------------------------------------------------------
//* engine
#include <Engine/System/DirectX/DxObject/DxDimensionBuffer.h>
#include <Engine/System/DirectX/DirectXAlignment.h>

//* lib
#include <Lib/Geometry/Vector3.h>
#include <Lib/Geometry/Color3.h>

_PUSH_GPU_BUFFER_ALIGNAS

////////////////////////////////////////////////////////////////////////////////////////////
// ParticleElement structure
////////////////////////////////////////////////////////////////////////////////////////////
struct ParticleElement {
public:

	////////////////////////////////////////////////////////////////////////////////////////////
	// Albedo structure
	////////////////////////////////////////////////////////////////////////////////////////////
	struct Albedo {
	public:

		////////////////////////////////////////////////////////////////////////////////////////////
		// Type enum class
		////////////////////////////////////////////////////////////////////////////////////////////
		enum class Type : uint32_t {
			Value   = 0,
			Texture = 1
		};

	public:

		//=========================================================================================
		// public methods
		//=========================================================================================

		void Init();

		void SetValue(const Color3f& _albedo);

		void SetTexture(uint32_t _index, const Color3f& _albedo = kWhite3<float>);

		//=========================================================================================
		// public variables
		//=========================================================================================

		Type type;

		Color3f albedo;
		uint32_t index;

	};

	////////////////////////////////////////////////////////////////////////////////////////////
	// Transparent structure
	////////////////////////////////////////////////////////////////////////////////////////////
	struct Transparent {
	public:

		////////////////////////////////////////////////////////////////////////////////////////////
		// Type enum class
		////////////////////////////////////////////////////////////////////////////////////////////
		enum class Type : uint32_t {
			Value   = 0,
			Texture = 1
		};

	public:

		//=========================================================================================
		// public methods
		//=========================================================================================

		void Init();

		void SetValue(float _transparent);

		void SetTexture(uint32_t _index, float _transparent = 1.0f);

		//=========================================================================================
		// public variables
		//=========================================================================================

		Type type;

		float    transparent;
		uint32_t index;

	};

public:

	//=========================================================================================
	// public methods
	//=========================================================================================

	void Init();

	//=========================================================================================
	// public variables
	//=========================================================================================

	Albedo albedo;
	Transparent transparent;

	uint32_t isBillboard; //!< flag
	// todo: Y軸billboardを追加.
	
};

_POP_GPU_BUFFER_ALIGNAS
