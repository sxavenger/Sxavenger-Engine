#pragma once

////////////////////////////////////////////////////////////////////////////////////////////
// Define Configs
////////////////////////////////////////////////////////////////////////////////////////////

#define _MAX_VERTICES            64
#define _MAX_INDICES             128
#define _AMPLIFICATION_NUMTHREAD 32

////////////////////////////////////////////////////////////////////////////////////////////
// Payload structure
////////////////////////////////////////////////////////////////////////////////////////////
struct Payload {
	uint meshletIndices[_AMPLIFICATION_NUMTHREAD];
	uint instanceIndices[_AMPLIFICATION_NUMTHREAD];
};

////////////////////////////////////////////////////////////////////////////////////////////
// Meshlet info structure
////////////////////////////////////////////////////////////////////////////////////////////

struct Meshlet {
	uint vertexOffset;
	uint triangleOffset;
	uint vertexCount;
	uint triangleCount;
};

////////////////////////////////////////////////////////////////////////////////////////////
// Common methods
////////////////////////////////////////////////////////////////////////////////////////////

uint3 UnpackPrimitiveIndex(uint packed) {
	return uint3(
		(packed >>  0) & 0x3FF,
		(packed >> 10) & 0x3FF,
		(packed >> 20) & 0x3FF
	);
	//!< 10 bits for each index.
}
